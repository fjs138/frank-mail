"use strict";

var _compression = _interopRequireDefault(require("./compression"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const MESSAGE_INITIALIZE_WORKER = 'start';
const MESSAGE_INFLATE = 'inflate';
const MESSAGE_INFLATED_DATA_READY = 'inflated_ready';
const MESSAGE_DEFLATE = 'deflate';
const MESSAGE_DEFLATED_DATA_READY = 'deflated_ready';

const createMessage = (message, buffer) => ({
  message,
  buffer
});

const inflatedReady = buffer => self.postMessage(createMessage(MESSAGE_INFLATED_DATA_READY, buffer), [buffer]);

const deflatedReady = buffer => self.postMessage(createMessage(MESSAGE_DEFLATED_DATA_READY, buffer), [buffer]);

const compressor = new _compression.default(inflatedReady, deflatedReady);

self.onmessage = function (e) {
  const message = e.data.message;
  const buffer = e.data.buffer;

  switch (message) {
    case MESSAGE_INITIALIZE_WORKER:
      break;

    case MESSAGE_INFLATE:
      compressor.inflate(buffer);
      break;

    case MESSAGE_DEFLATE:
      compressor.deflate(buffer);
      break;
  }
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9jb21wcmVzc2lvbi13b3JrZXIuanMiXSwibmFtZXMiOlsiTUVTU0FHRV9JTklUSUFMSVpFX1dPUktFUiIsIk1FU1NBR0VfSU5GTEFURSIsIk1FU1NBR0VfSU5GTEFURURfREFUQV9SRUFEWSIsIk1FU1NBR0VfREVGTEFURSIsIk1FU1NBR0VfREVGTEFURURfREFUQV9SRUFEWSIsImNyZWF0ZU1lc3NhZ2UiLCJtZXNzYWdlIiwiYnVmZmVyIiwiaW5mbGF0ZWRSZWFkeSIsInNlbGYiLCJwb3N0TWVzc2FnZSIsImRlZmxhdGVkUmVhZHkiLCJjb21wcmVzc29yIiwiQ29tcHJlc3NvciIsIm9ubWVzc2FnZSIsImUiLCJkYXRhIiwiaW5mbGF0ZSIsImRlZmxhdGUiXSwibWFwcGluZ3MiOiI7O0FBQUE7Ozs7QUFFQSxNQUFNQSx5QkFBeUIsR0FBRyxPQUFsQztBQUNBLE1BQU1DLGVBQWUsR0FBRyxTQUF4QjtBQUNBLE1BQU1DLDJCQUEyQixHQUFHLGdCQUFwQztBQUNBLE1BQU1DLGVBQWUsR0FBRyxTQUF4QjtBQUNBLE1BQU1DLDJCQUEyQixHQUFHLGdCQUFwQzs7QUFFQSxNQUFNQyxhQUFhLEdBQUcsQ0FBQ0MsT0FBRCxFQUFVQyxNQUFWLE1BQXNCO0FBQUVELEVBQUFBLE9BQUY7QUFBV0MsRUFBQUE7QUFBWCxDQUF0QixDQUF0Qjs7QUFFQSxNQUFNQyxhQUFhLEdBQUdELE1BQU0sSUFBSUUsSUFBSSxDQUFDQyxXQUFMLENBQWlCTCxhQUFhLENBQUNILDJCQUFELEVBQThCSyxNQUE5QixDQUE5QixFQUFxRSxDQUFDQSxNQUFELENBQXJFLENBQWhDOztBQUNBLE1BQU1JLGFBQWEsR0FBR0osTUFBTSxJQUFJRSxJQUFJLENBQUNDLFdBQUwsQ0FBaUJMLGFBQWEsQ0FBQ0QsMkJBQUQsRUFBOEJHLE1BQTlCLENBQTlCLEVBQXFFLENBQUNBLE1BQUQsQ0FBckUsQ0FBaEM7O0FBQ0EsTUFBTUssVUFBVSxHQUFHLElBQUlDLG9CQUFKLENBQWVMLGFBQWYsRUFBOEJHLGFBQTlCLENBQW5COztBQUVBRixJQUFJLENBQUNLLFNBQUwsR0FBaUIsVUFBVUMsQ0FBVixFQUFhO0FBQzVCLFFBQU1ULE9BQU8sR0FBR1MsQ0FBQyxDQUFDQyxJQUFGLENBQU9WLE9BQXZCO0FBQ0EsUUFBTUMsTUFBTSxHQUFHUSxDQUFDLENBQUNDLElBQUYsQ0FBT1QsTUFBdEI7O0FBRUEsVUFBUUQsT0FBUjtBQUNFLFNBQUtOLHlCQUFMO0FBQ0U7O0FBRUYsU0FBS0MsZUFBTDtBQUNFVyxNQUFBQSxVQUFVLENBQUNLLE9BQVgsQ0FBbUJWLE1BQW5CO0FBQ0E7O0FBRUYsU0FBS0osZUFBTDtBQUNFUyxNQUFBQSxVQUFVLENBQUNNLE9BQVgsQ0FBbUJYLE1BQW5CO0FBQ0E7QUFWSjtBQVlELENBaEJEIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IENvbXByZXNzb3IgZnJvbSAnLi9jb21wcmVzc2lvbidcblxuY29uc3QgTUVTU0FHRV9JTklUSUFMSVpFX1dPUktFUiA9ICdzdGFydCdcbmNvbnN0IE1FU1NBR0VfSU5GTEFURSA9ICdpbmZsYXRlJ1xuY29uc3QgTUVTU0FHRV9JTkZMQVRFRF9EQVRBX1JFQURZID0gJ2luZmxhdGVkX3JlYWR5J1xuY29uc3QgTUVTU0FHRV9ERUZMQVRFID0gJ2RlZmxhdGUnXG5jb25zdCBNRVNTQUdFX0RFRkxBVEVEX0RBVEFfUkVBRFkgPSAnZGVmbGF0ZWRfcmVhZHknXG5cbmNvbnN0IGNyZWF0ZU1lc3NhZ2UgPSAobWVzc2FnZSwgYnVmZmVyKSA9PiAoeyBtZXNzYWdlLCBidWZmZXIgfSlcblxuY29uc3QgaW5mbGF0ZWRSZWFkeSA9IGJ1ZmZlciA9PiBzZWxmLnBvc3RNZXNzYWdlKGNyZWF0ZU1lc3NhZ2UoTUVTU0FHRV9JTkZMQVRFRF9EQVRBX1JFQURZLCBidWZmZXIpLCBbYnVmZmVyXSlcbmNvbnN0IGRlZmxhdGVkUmVhZHkgPSBidWZmZXIgPT4gc2VsZi5wb3N0TWVzc2FnZShjcmVhdGVNZXNzYWdlKE1FU1NBR0VfREVGTEFURURfREFUQV9SRUFEWSwgYnVmZmVyKSwgW2J1ZmZlcl0pXG5jb25zdCBjb21wcmVzc29yID0gbmV3IENvbXByZXNzb3IoaW5mbGF0ZWRSZWFkeSwgZGVmbGF0ZWRSZWFkeSlcblxuc2VsZi5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoZSkge1xuICBjb25zdCBtZXNzYWdlID0gZS5kYXRhLm1lc3NhZ2VcbiAgY29uc3QgYnVmZmVyID0gZS5kYXRhLmJ1ZmZlclxuXG4gIHN3aXRjaCAobWVzc2FnZSkge1xuICAgIGNhc2UgTUVTU0FHRV9JTklUSUFMSVpFX1dPUktFUjpcbiAgICAgIGJyZWFrXG5cbiAgICBjYXNlIE1FU1NBR0VfSU5GTEFURTpcbiAgICAgIGNvbXByZXNzb3IuaW5mbGF0ZShidWZmZXIpXG4gICAgICBicmVha1xuXG4gICAgY2FzZSBNRVNTQUdFX0RFRkxBVEU6XG4gICAgICBjb21wcmVzc29yLmRlZmxhdGUoYnVmZmVyKVxuICAgICAgYnJlYWtcbiAgfVxufVxuIl19